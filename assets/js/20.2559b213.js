(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{520:function(t,a,e){"use strict";e.r(a);var r=e(6),s=Object(r.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("blockquote"),t._v(" "),e("h2",{attrs:{id:"tcp-transmission-control-protocol"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#tcp-transmission-control-protocol"}},[t._v("#")]),t._v(" TCP(Transmission Control Protocol)")]),t._v(" "),e("h3",{attrs:{id:"what"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#what"}},[t._v("#")]),t._v(" "),e("a",{attrs:{href:"https://zh.wikipedia.org/wiki/%E4%BC%A0%E8%BE%93%E6%8E%A7%E5%88%B6%E5%8D%8F%E8%AE%AE",target:"_blank",rel:"noopener noreferrer"}},[t._v("What"),e("OutboundLink")],1)]),t._v(" "),e("ul",[e("li",[t._v("可靠，有状态")]),t._v(" "),e("li",[t._v("基于字节流的传输层通信协议")])]),t._v(" "),e("h3",{attrs:{id:"how"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#how"}},[t._v("#")]),t._v(" How")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://upload.wikimedia.org/wikipedia/commons/f/f6/Tcp_state_diagram_fixed_new.svg",alt:"Detail"}})]),t._v(" "),e("h4",{attrs:{id:"连接创建-三次握手-three-way-handshake"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#连接创建-三次握手-three-way-handshake"}},[t._v("#")]),t._v(" 连接创建(三次握手 three-way handshake)")]),t._v(" "),e("blockquote",[e("p",[t._v("一对终端同时初始化一个它们之间的连接是可能的。但通常是由一端打开一个套接字（socket）然后监听来自另一方的连接，这就是通常所指的被动打开（passive open）。服务器端被被动打开以后，用户端就能开始创建主动打开（active open）")])]),t._v(" "),e("p",[e("img",{attrs:{src:"https://upload.wikimedia.org/wikipedia/commons/3/3f/Connection_TCP.png",alt:"three-way handshake"}})]),t._v(" "),e("ol",[e("li",[e("em",[t._v("客户端")]),t._v("发送随机序列号为"),e("strong",[t._v("A")]),t._v("的"),e("strong",[t._v("SYN")]),t._v("给"),e("em",[t._v("服务端")])]),t._v(" "),e("li",[e("em",[t._v("服务端")]),t._v("接收成功后，将收到的序列号"),e("strong",[t._v("A")]),t._v("设置为"),e("strong",[t._v("A+1")]),t._v("，并将其设为"),e("strong",[t._v("ACK")]),t._v("确认码，即"),e("strong",[t._v("ACK=A+1")]),t._v("。同时产生一个随机序列号为"),e("strong",[t._v("B")]),t._v("的"),e("strong",[t._v("SYN")]),t._v("。两者组合成"),e("strong",[t._v("SYN/ACK")]),t._v("包，回送给客户端")]),t._v(" "),e("li",[e("em",[t._v("客户端")]),t._v("收到"),e("strong",[t._v("SYN/ACK")]),t._v("后，再发送一个"),e("strong",[t._v("SYN/ACK")]),t._v("包，此时"),e("strong",[t._v("SYN=A+1")]),t._v("，"),e("strong",[t._v("ACK=B+1")])])]),t._v(" "),e("h4",{attrs:{id:"数据传送"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#数据传送"}},[t._v("#")]),t._v(" 数据传送")]),t._v(" "),e("ul",[e("li",[t._v("基于重复累计确认的重复")]),t._v(" "),e("li",[t._v("超时重传")]),t._v(" "),e("li",[t._v("流量控制")]),t._v(" "),e("li",[e("a",{attrs:{href:"https://zh.wikipedia.org/wiki/%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6",target:"_blank",rel:"noopener noreferrer"}},[t._v("拥塞控制"),e("OutboundLink")],1)])]),t._v(" "),e("h4",{attrs:{id:"连接终止-四次挥手"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#连接终止-四次挥手"}},[t._v("#")]),t._v(" 连接终止(四次挥手)")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/2/2d/Deconnection_TCP.png/220px-Deconnection_TCP.png",alt:"four-way handshake"}})]),t._v(" "),e("ul",[e("li",[e("p",[t._v("连接可以工作在 TCP 半开状态。即一侧关闭了连接，不再发送数据；但另一侧没有关闭连接，仍可以发送数据。已关闭的一侧仍然应接收数据，直至对侧也关闭了连接。")])]),t._v(" "),e("li",[e("p",[t._v("也可以通过测三次握手关闭连接。主机 A 发出 FIN，主机 B 回复 FIN & ACK，然后主机 A 回复 ACK.")])])]),t._v(" "),e("h4",{attrs:{id:"why-do-we-need-a-3-way-handshake-why-not-just-2-way"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#why-do-we-need-a-3-way-handshake-why-not-just-2-way"}},[t._v("#")]),t._v(" "),e("a",{attrs:{href:"https://networkengineering.stackexchange.com/questions/24068/why-do-we-need-a-3-way-handshake-why-not-just-2-way",target:"_blank",rel:"noopener noreferrer"}},[t._v("Why do we need a 3-way handshake? Why not just 2-way?"),e("OutboundLink")],1)]),t._v(" "),e("blockquote",[e("p",[t._v("翻译自 stackoverflow 的高赞回复")])]),t._v(" "),e("ul",[e("li",[e("p",[e("em",[t._v("TCP")]),t._v("协议中，通讯的两端跟踪他们已经发送的序列号。有效地。接收方通过发送方的序列号来确认他们所接受的数据。")])]),t._v(" "),e("li",[e("p",[t._v("但是序列号从"),e("em",[t._v("ISN（Initial Sequence Number 初始序列号：一个随机数）"),e("em",[t._v("非零开始递增。因为")]),t._v("TCP")]),t._v("是一个双向的通讯协议，通讯的两端都可以“发声”，所以两端都必须随机生成 ISN 作为他们的初始序列号。也就是意味着，两端都需要获悉另外一方的"),e("em",[t._v("ISN")])])]),t._v(" "),e("li",[e("p",[t._v("两次握手仅仅能让其中一端通过发送"),e("em",[t._v("ISN")]),t._v("建立连接，另一端确认（"),e("em",[t._v("ACK")]),t._v("），没有达到双向连接和确认的效果")])])]),t._v(" "),e("h3",{attrs:{id:"应用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#应用"}},[t._v("#")]),t._v(" 应用")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("Http")])]),t._v(" "),e("li",[e("p",[t._v("DoS 攻击：伪造 TCP 报文")])])]),t._v(" "),e("h2",{attrs:{id:"udp-user-datagram-protocol"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#udp-user-datagram-protocol"}},[t._v("#")]),t._v(" UDP(User Datagram Protocol)")]),t._v(" "),e("h3",{attrs:{id:"what-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#what-2"}},[t._v("#")]),t._v(" "),e("a",{attrs:{href:"https://zh.wikipedia.org/wiki/%E7%94%A8%E6%88%B7%E6%95%B0%E6%8D%AE%E6%8A%A5%E5%8D%8F%E8%AE%AE",target:"_blank",rel:"noopener noreferrer"}},[t._v("What"),e("OutboundLink")],1)]),t._v(" "),e("ul",[e("li",[t._v("不可靠，无连接")]),t._v(" "),e("li",[t._v("简单的面向数据报的通信协议")])]),t._v(" "),e("h3",{attrs:{id:"应用-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#应用-2"}},[t._v("#")]),t._v(" 应用")]),t._v(" "),e("ul",[e("li",[t._v("(公网/局域网)DNS 域名系统")]),t._v(" "),e("li",[t._v("本地 host")])])])}),[],!1,null,null,null);a.default=s.exports}}]);