(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{518:function(t,_,e){"use strict";e.r(_);var v=e(6),r=Object(v.a)({},(function(){var t=this,_=t.$createElement,e=t._self._c||_;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h2",{attrs:{id:"浏览器缓存概念与分类"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#浏览器缓存概念与分类"}},[t._v("#")]),t._v(" 浏览器缓存概念与分类")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("按位置分类")]),t._v(" "),e("ul",[e("li",[t._v("内存缓存 (from memory cache)\n"),e("ul",[e("li",[t._v("快速读取")]),t._v(" "),e("li",[t._v("时效性")])])]),t._v(" "),e("li",[t._v("硬盘缓存 (from disk cache)")]),t._v(" "),e("li",[t._v("service worker")])])]),t._v(" "),e("li",[e("p",[t._v("按策略分类")]),t._v(" "),e("ul",[e("li",[t._v("强缓存\n"),e("blockquote",[e("p",[e("strong",[t._v("优先级高")]),t._v("，缓存有效期内不会因为资源的改动而发送请，适用于大型且不易修改的资源文件。可为文件名加入 hash 标识进行版本的区分")])]),t._v(" "),e("ul",[e("li",[t._v("Expires（HTTP/1.0）\n"),e("blockquote",[e("p",[t._v("使用客户端的时间与服务端返回的时间做对比")])])]),t._v(" "),e("li",[t._v("Cache-Control（HTTP/1.1，优先级高于 Expires）\n"),e("ul",[e("li",[t._v("no-cache\n"),e("blockquote",[e("p",[t._v("客户端缓存内容，但是是否使用缓存则需要经过协商缓存来验证决定")])])]),t._v(" "),e("li",[t._v("max-age=xxx(xxx is numeric)\n"),e("blockquote",[e("p",[t._v("缓存内容将在 xxx 秒后失效")])])]),t._v(" "),e("li",[t._v("no-store\n"),e("blockquote",[e("p",[t._v("所有内容都不会被缓存，即不使用强制缓存，也不使用协商缓存")])])]),t._v(" "),e("li",[t._v("public\n"),e("blockquote",[e("p",[t._v("所有内容都将被缓存（客户端和代理服务器都可缓存）")])])]),t._v(" "),e("li",[t._v("private\n"),e("blockquote",[e("p",[t._v("所有内容只有客户端可以缓存，Cache-Control 的默认取值")])])])])])])]),t._v(" "),e("li",[t._v("协商缓存\n"),e("blockquote",[e("p",[e("strong",[t._v("灵活性高")]),t._v("，适用于数据缓存。生效返回"),e("code",[t._v("304")])])]),t._v(" "),e("ul",[e("li",[t._v("Etag (优先级较高)\n"),e("ul",[e("li",[t._v("Etag\n"),e("blockquote",[e("p",[t._v("响应头（response headers），返回当前资源文件的一个唯一标识(由服务器生成)")])]),t._v(" "),e("ul",[e("li",[t._v("etag 的生成策略，参考中间件"),e("a",{attrs:{href:"https://github.com/koajs/etag",target:"_blank",rel:"noopener noreferrer"}},[t._v("koa-etag"),e("OutboundLink")],1)])])]),t._v(" "),e("li",[t._v("If-None-Match\n"),e("blockquote",[e("p",[t._v("请求头（request headers）字段，客户端再次发起该请求时，携带上次请求返回的唯一标识 Etag 值，通过此字段值告诉服务器该资源上次请求返回的唯一标识值。服务器收到该请求后，发现该请求头中含有 If-None-Match，则会根据 If-None-Match 的字段值与该资源在服务器的 Etag 值做对比，一致则返回 304，代表资源无更新，继续使用缓存文件；不一致则重新返回资源文件，状态码为 200。If-Modified-Since > 请求头（request headers）字段")])])])])])])])])])]),t._v(" "),e("h2",{attrs:{id:"缓存与浏览器操作"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#缓存与浏览器操作"}},[t._v("#")]),t._v(" 缓存与浏览器操作")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("浏览器相关操作")]),t._v(" "),e("th",[t._v("Expires/Cache-Control")]),t._v(" "),e("th",[t._v("Last-Modified/etag")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("在地址栏中按回车")]),t._v(" "),e("td",[t._v("有效")]),t._v(" "),e("td",[t._v("有效")])]),t._v(" "),e("tr",[e("td",[t._v("页面跳转")]),t._v(" "),e("td",[t._v("有效")]),t._v(" "),e("td",[t._v("有效")])]),t._v(" "),e("tr",[e("td",[t._v("新开窗口")]),t._v(" "),e("td",[t._v("有效")]),t._v(" "),e("td",[t._v("有效")])]),t._v(" "),e("tr",[e("td",[t._v("浏览器前进、退后")]),t._v(" "),e("td",[t._v("有效")]),t._v(" "),e("td",[t._v("有效")])]),t._v(" "),e("tr",[e("td",[t._v("浏览器刷新")]),t._v(" "),e("td",[t._v("无效")]),t._v(" "),e("td",[t._v("有效")])]),t._v(" "),e("tr",[e("td",[t._v("强制刷新")]),t._v(" "),e("td",[t._v("无效")]),t._v(" "),e("td",[t._v("无效")])])])]),t._v(" "),e("h2",{attrs:{id:"参考文献"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参考文献"}},[t._v("#")]),t._v(" 参考文献")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://juejin.cn/post/6844903593275817998",target:"_blank",rel:"noopener noreferrer"}},[t._v("彻底理解浏览器缓存"),e("OutboundLink")],1),t._v(" "),e("a",{attrs:{href:"https://mp.weixin.qq.com/s?__biz=MjM5MTA1MjAxMQ==&mid=2651226347&idx=1&sn=6dbccc54406f0b075671884b738b1e88&chksm=bd49596f8a3ed079f79cda4b90ac3cb3b1dbdb5bfb8aade962a16a323563bf26a0c75b0a5d7b&scene=21#wechat_redirect",target:"_blank",rel:"noopener noreferrer"}},[t._v("浏览器缓存机制剖析"),e("OutboundLink")],1)])])}),[],!1,null,null,null);_.default=r.exports}}]);